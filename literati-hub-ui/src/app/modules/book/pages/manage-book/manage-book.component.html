<div class="container mx-auto p-4">
  <h2 class="text-3xl font-semibold mb-4">Manage My Book</h2>
  <hr class="mb-4 border-gray-300" />

  <!-- Error Message -->
  <div *ngIf="errorMsg.length" class="mb-4 p-4 rounded bg-red-100 text-red-800">
    <p *ngFor="let msg of errorMsg" class="p-0 m-0">{{ msg }}</p>
  </div>

  <div class="flex flex-col lg:flex-row gap-4">
    <!-- Image and File Upload -->
    <div class="w-full lg:w-1/3">
      <img
        class="rounded-lg w-full h-auto"
        [src]="selectedPicture || 'https://picsum.photos/300'"
        alt="Book Cover"
      />
      <div class="mt-2">
        <input
          (change)="onFileSelected($event)"
          class="form-input mt-2 block w-full"
          type="file"
          id="formFile"
          accept="image/*"
        />
      </div>
    </div>

    <!-- Form Fields -->
    <div class="w-full lg:w-2/3">
      <form class="space-y-4">
        <div>
          <label for="title" class="block text-gray-700 font-semibold mb-1"
            >Title</label
          >
          <input
            name="title"
            [(ngModel)]="bookRequest.title"
            type="text"
            class="form-input block w-full"
            id="title"
            placeholder="Title"
          />
        </div>
        <div class="flex flex-col lg:flex-row gap-4">
          <div class="w-full lg:w-1/2">
            <label for="author" class="block text-gray-700 font-semibold mb-1"
              >Author</label
            >
            <input
              name="author"
              [(ngModel)]="bookRequest.authorName"
              type="text"
              class="form-input block w-full"
              id="author"
              placeholder="Author"
            />
          </div>
          <div class="w-full lg:w-1/2">
            <label for="isbn" class="block text-gray-700 font-semibold mb-1"
              >ISBN</label
            >
            <input
              name="isbn"
              [(ngModel)]="bookRequest.isbn"
              type="text"
              class="form-input block w-full"
              id="isbn"
              placeholder="ISBN"
            />
          </div>
        </div>
        <div>
          <label for="synopsis" class="block text-gray-700 font-semibold mb-1"
            >Synopsis</label
          >
          <textarea
            name="synopsis"
            [(ngModel)]="bookRequest.synopsis"
            class="form-input block w-full"
            id="synopsis"
            placeholder="Synopsis"
          ></textarea>
        </div>
        <div>
          <div class="flex items-center">
            <input
              [(ngModel)]="bookRequest.shareable"
              class="form-checkbox mr-2"
              type="checkbox"
              id="gridCheck"
              name="shareable"
            />
            <label class="text-gray-700" for="gridCheck"> Share me </label>
          </div>
        </div>
        <div class="flex flex-col md:flex-row justify-end gap-4 mt-4">
          <button
            (click)="saveBook()"
            type="submit"
            class="px-4 py-2 rounded border border-blue-500 bg-blue-500 text-white hover:bg-blue-600 flex items-center space-x-2"
          >
            <i class="fas fa-save"></i>
            <span>Save</span>
          </button>
          <a
            routerLink="/books/my-books"
            class="px-4 py-2 rounded border border-red-500 text-red-500 hover:bg-red-100 flex items-center space-x-2"
          >
            <i class="fas fa-times"></i>
            <span>Cancel</span>
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
